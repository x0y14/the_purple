on_explicit_claim_gain = {
	effect = {
		if = {
			limit = { 
				title:k_england.holder = root
			}
			title:k_england = {
				update_dynamic_coa = yes
			}
		}
		# Struggle Catalyst
		if = { # FP2
			limit = {
				NOT = { scope:transfer_type = flag:inheritance }

				root = {
					any_character_struggle = {
						is_struggle_type = iberian_struggle
						involvement = involved
					}
				}
				title:e_spain = { any_in_de_jure_hierarchy = { this = scope:title } }
			}
			root = {
				every_character_struggle = {
					involvement = involved
					limit = {
						activate_struggle_catalyst_secondary_character_involvement_involved_trigger = {
							CATALYST = catalyst_gain_claim_on_title_fp2
							CHAR = root
						}
					}
					activate_struggle_catalyst = {
						catalyst = catalyst_gain_claim_on_title_fp2
						character = root
					}
				}
			}
		}
		else_if = { # FP3
			limit = {
				NOT = { scope:transfer_type = flag:inheritance }

				root = {
					any_character_struggle = {
						is_struggle_type = persian_struggle
						involvement = involved
					}
				}
				title:e_persia = { any_in_de_jure_hierarchy = { this = scope:title } }
			}
			root = {
				every_character_struggle = {
					involvement = involved
					limit = {
						activate_struggle_catalyst_secondary_character_involvement_involved_trigger = {
							CATALYST = catalyst_gain_claim_on_title_fp3
							CHAR = root
						}
					}
					activate_struggle_catalyst = {
						catalyst = catalyst_gain_claim_on_title_fp3
						character = root
					}
					log_debug_variable_for_persian_struggle_effect = { VAR = unrest_catalyst_gain_claim_on_title_fp3 }
				}
			}
		}
		# -- the purple --
		else_if = {
			limit = {
				NOT = { scope:transfer_type = flag:inheritance }
				root = {
					any_character_struggle = {
						is_struggle_type = byzantine_struggle
						involvement = involved
					}
				}
				title:e_byzantium = { any_in_de_jure_hierarchy = { this = scope:title } }
			}
			root = {
				every_character_struggle = {
					involvement = involved
					limit = {
						activate_struggle_catalyst_secondary_character_involvement_involved_trigger = {
							CATALYST = catalyst_gain_claim_on_title_tp
							CHAR = root
						}
					}
					activate_struggle_catalyst = {
						catalyst = catalyst_gain_claim_on_title_tp
						character = root
					}
				}
			}
		}
		# ----------------
	}
}

on_title_gain_usurpation = {
	events = {}
	effect = {
		# Struggle Catalysts
		if = {
			limit = { # FP2
				# We are only interested in the title within the Struggle Region
				title:e_spain = {
					any_in_de_jure_hierarchy = {
						this = 	scope:title
					}
				}
				# Only for usurpation
				scope:transfer_type = flag:usurped

				root = {
					any_character_struggle = {
						involvement = involved
						activate_struggle_catalyst_secondary_character_involvement_involved_trigger = {
							CATALYST = catalyst_usurp_title_fp2
							CHAR = root
						}
					}
				}
			}
			root = {
				every_character_struggle = {
					involvement = involved
					limit = {
						activate_struggle_catalyst_secondary_character_involvement_involved_trigger = {
							CATALYST = catalyst_usurp_title_fp2
							CHAR = root
						}
					}
					activate_struggle_catalyst = {
						catalyst = catalyst_usurp_title_fp2
						character = root
					}
				}
			}
		}

		if = {
			limit = { # FP3
				title:e_persia = { any_in_de_jure_hierarchy = { this = scope:title } }
				scope:transfer_type = flag:usurped

				root = {
					any_character_struggle = {
						involvement = involved
						activate_struggle_catalyst_secondary_character_involvement_involved_trigger = {
							CATALYST = catalyst_usurp_title_fp3
							CHAR = root
						}
					}
				}
			}
			root = {
				every_character_struggle = {
					involvement = involved
					limit = {
						activate_struggle_catalyst_secondary_character_involvement_involved_trigger = {
							CATALYST = catalyst_usurp_title_fp3
							CHAR = root
						}
					}
					activate_struggle_catalyst = {
						catalyst = catalyst_usurp_title_fp3
						character = root
					}
					log_debug_variable_for_persian_struggle_effect = { VAR = unrest_catalyst_usurp_title_fp3 }
				}
			}
		}

		# -- the purple --
		if = {
			limit = {
				title:e_byzantium= { any_in_de_jure_hierarchy = { this = scope:title } }
				scope:transfer_type = flag:usurped

				root = {
					any_character_struggle = {
						involvement = involved
						activate_struggle_catalyst_secondary_character_involvement_involved_trigger = {
							CATALYST = catalyst_usurp_title_tp
							CHAR = root
						}
					}
				}
			}
			root = {
				every_character_struggle = {
					involvement = involved
					limit = {
						activate_struggle_catalyst_secondary_character_involvement_involved_trigger = {
							CATALYST = catalyst_usurp_title_tp
							CHAR = root
						}
					}
					activate_struggle_catalyst = {
						catalyst = catalyst_usurp_title_tp
						character = root
					}
				}
			}
		}
		# ----------------
	}
}